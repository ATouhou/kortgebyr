function calc(){var e,t,n,r,i;oms<2e4?PSP[0].variableTransactionFee=3.4:oms<=8e4?PSP[0].variableTransactionFee=2.9:oms<=4e5?PSP[0].variableTransactionFee=2.7:oms<=8e5?PSP[0].variableTransactionFee=2.4:PSP[0].variableTransactionFee=1.9;if(value<=50)acquirer[0].fixedTransactionFee=.7;else if(value<=100)acquirer[0].fixedTransactionFee=1.1;else if(value<=500)acquirer[0].fixedTransactionFee=1.45;else{acquirer[0].fixedTransactionFee=1.45;acquirer[0].variableTransactionFee=.001}for(e=0;e<acquirer.length;e++){t=1;dankort===!0&&visamc===!0&&(acquirer[e].name!=="nets"?t=(100-dankortfrekvens)/100:t=dankortfrekvens/100);acquirer[e].transactionCosts=t*(transactions*acquirer[e].fixedTransactionFee+oms*(acquirer[e].variableTransactionFee/100));acquirer[e].totalCosts=acquirer[e].transactionCosts+acquirer[e].monthlyFee;console.log(acquirer[e].name+": "+acquirer[e].totalCosts)}for(e=0;e<PSP.length;e++){PSP[e].acquirer==undefined?PSP[e].transactionCosts=PSP[e].fixedTransactionFee*transactions+PSP[e].variableTransactionFee/100*oms:transactions>PSP[e].freeTransactions&&(PSP[e].transactionCosts=PSP[e].fixedTransactionFee*(transactions-PSP[e].freeTransactions));PSP[e].costs=PSP[e].monthlyFee+PSP[e].transactionCosts;PSP[e].totalCosts=PSP[e].costs;PSP[e].totalMonthlyFee=PSP[e].monthlyFee;PSP[e].totalSetupFee=PSP[e].setupFee;if(PSP[e].acquirer!==undefined){n=Number.POSITIVE_INFINITY;PSP[e].availableAcquirers.forEach(function(e,t){console.log("n="+e+", x="+t);if(e>0&&jcb===!1){r=acquirer[e].totalCosts;if(r<n){n=r;i=e}}else jcb===!0&&(i=2)});PSP[e].acquirer=i;PSP[e].costs=PSP[e].monthlyFee+PSP[e].transactionCosts;if(dankort===!0&&PSP[e].acquirer!==undefined){PSP[e].totalSetupFee+=acquirer[0].setupFee;PSP[e].totalMonthlyFee+=acquirer[0].monthlyFee;PSP[e].totalCosts+=acquirer[0].totalCosts}if(PSP[e].acquirer!==0&&visamc===!0){PSP[e].totalSetupFee+=acquirer[PSP[e].acquirer].setupFee;PSP[e].totalMonthlyFee+=acquirer[PSP[e].acquirer].monthlyFee;PSP[e].totalCosts+=acquirer[PSP[e].acquirer].totalCosts}}}PSP.sort(function(e,t){return t.totalCosts-e.totalCosts});build()}function build(){var e,t,n,r,i,s,o,u,a,f,l,c,h=document.getElementById("data");h.innerHTML="";for(t=0;t<PSP.length;t++){if(visamc===!0&&PSP[t].availableAcquirers==0){console.log(PSP[t].acquirer);continue}e=h.insertRow(0);n=e.insertCell(0);r=e.insertCell(1);i=e.insertCell(2);s=e.insertCell(3);o=e.insertCell(4);u=e.insertCell(5);a=e.insertCell(6);f="<div class='acquirer'>";l="";if(PSP[t].acquirer==undefined)PSP[t].cards.forEach(function(e){l+="<img src='cards/"+cards[e].logo+"' width='24' />"});else{if(dankort===!0&&PSP[t].acquirer!==undefined){f+="<p style='background-position: 0 0px'></p>";l+="<img src='cards/dankort.png' height='16' />";PSP[t].cards.indexOf(1)>-1&&(l+="<img src='cards/edankort.png' height='16' />")}if(PSP[t].acquirer!==0&&visamc===!0){f+="<p style='background-position: 0 -"+16*(acquirer[PSP[t].acquirer].logo-1)+"px'></p>";acquirer[PSP[t].acquirer].cards.forEach(function(e){PSP[t].cards.indexOf(e)>-1&&(l+="<img src='cards/"+cards[e].logo+"' height='16' />")})}}f+="</div>";n.innerHTML="<div class=psp><a target='_blank' href='http://"+PSP[t].link+"'><p style='background-position: 0 -"+32*(PSP[t].logo-1)+"px'></p>"+PSP[t].name+"</a></div>";r.innerHTML="<div class=kort>"+l+"</div>";i.innerHTML=f;s.innerHTML=Math.round(PSP[t].totalSetupFee)+" kr";o.innerHTML=Math.round(PSP[t].totalMonthlyFee)+" kr";c="<a href='#' class='tooltip'>?<span>"+PSP[t].name+":"+PSP[t].costs;if(PSP[t].acquirer!==undefined){dankort===!0&&(c+="<br />Nets: "+acquirer[0].totalCosts);visamc===!0&&(c+="<br />"+acquirer[PSP[t].acquirer].name+": "+acquirer[PSP[t].acquirer].totalCosts)}c+="</span></a>";u.innerHTML=Math.round(PSP[t].totalCosts)+" kr"+c;a.innerHTML=(PSP[t].totalCosts/transactions).toFixed(2)+" kr"+c}};